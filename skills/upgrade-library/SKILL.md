---
name: upgrade-library
description: 指定したバージョンにライブラリを更新し、それに伴う破壊的変更への対応を行う
disable-model-invocation: true 
---

## Description

以下進行ルールに従いつつ、指定したバージョンにライブラリを更新し、それに伴う破壊的変更への対応を行う。

### 進行ルール

**以下の進行ルールは必ず守るようにしてください**

- STEP1. 移行ガイドを読み、移行ガイドの項目名をリスト化する
  - 移行ガイド(コマンドから与えれる)を読み、移行ガイドの項目名をリスト化する
  - 完了時に人間のレビューを待つために処理を停止する
  - レビューが通ったらSTEP2へ進む
- STEP2. 移行ガイドの項目ごとに以下を行う
  - 移行ガイドを参考に実装などの更新が必要かどうか判断し対応を行う
  - 更新が必要な場合
    - 更新を行いコミットをする
    - migration_log.md に以下の内容のログを記載する
      - 移行ガイドの項目タイトル ( 見出し `##` として記載 )
      - コミットID
      - 変更ファイル数
      - どのような更新をしたか解説
      - 挙動に影響がありそう場合はその内容を記載
    - **人間のレビューを待つために処理を停止する**
    - レビューが通ったら、次の移行ガイド項目がある限り、再びSTEP2を行う
  - 更新が不要な場合
    - migration_log.md に以下の内容のログを記載する
      - 移行ガイドの項目タイトル ( 見出し `##` として記載 )
      - 対応不要だった理由
      - 挙動に影響がありそう場合はその内容を記載
      - 次の移行ガイド項目がある限り、再びSTEP2を行う。
- STEP3: ログの整理し移行レポートの作成をする
  - migration_log.md の内容を元にして以下のように整理した migration_result.md を作成する
    - 「更新が行われた移行ガイド項目」と「更新不要だった移行ガイド項目」の2種類に分類し、単純に並び替える
    - 総括としての説明を加える


## Usage

- `/upgrade-library {libraryName} --from {currentVersion} --to {nextVersion} --url {migrationGuideUrl}`
  - 対象ライブラリをcurrentVersionからnextVersionに上げる。移行ガイドとしてmigrationGuideUrlを用いる
